<%- include('../layouts/header') %>
<!-- This is my main “planner” page where all the items I’ve added are shown.This is basically the R in CRUD Read, because it displays data from MongoDB.-->
<section class="section">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <p class="section-title mb-1">MyStyle Planner</p>
        <h1 class="section-heading mb-0">All items</h1>
      </div>
      <!-- Takes user to the create page -->
      <a href="/items/create" class="btn btn-primary-mystyle">Add new item</a>
    </div>

    <div class="row gy-4">
      <% if (items && items.length > 0) { %>
         <!-- Loop through all items and create one card per item -->
        <% items.forEach(function(item) { %>
          <div class="col-md-6 col-lg-4">
            <div class="card item-card">
              <div class="card-header d-flex justify-content-between align-items-center">
                <span><%= item.name %></span>
                <!-- Priority badge only shows if a priority exists -->
                <% if (item.priority) { %>
                  <span class="badge bg-light text-dark badge-priority"><%= item.priority %></span>
                <% } %>
              </div>

              <div class="card-body">
                <p class="mb-1"><strong>Store:</strong> <%= item.store || '—' %></p>
                <p class="mb-1"><strong>Category:</strong> <%= item.category || '—' %></p>
                <p class="mb-1"><strong>Price:</strong>
                  <% if (item.price) { %>
                    $<%= item.price %>
                  <% } else { %>
                    —
                  <% } %>
                </p>
                <p class="mb-1"><strong>Status:</strong> <%= item.status || 'Wishlist' %></p>
                <% if (item.notes) { %>
                  <p class="mt-2 mb-0"><strong>Notes:</strong> <%= item.notes %></p>
                <% } %>
              </div>

              <div class="card-footer text-end">
                <a href="/items/<%= item._id %>/edit" class="btn btn-sm btn-outline-mystyle me-2">Edit</a>
                <a href="/items/<%= item._id %>/delete" class="btn btn-sm btn-outline-danger">Delete</a>
              </div>
            </div>
          </div>

        <% }); %>
      <% } else { %>
        <div class="col-12">
          <p>You haven’t added anything yet. Start with that one item you keep thinking about.</p>
        </div>
      <% } %>
    </div>
  </div>

</section>

<%- include('../layouts/footer') %>

<!--ends-->